{% extends 'base.html' %}

{% block head %}
<title>{{ title }} - TaskSmash</title> {% endblock %}

{% block body %}
<section class="App Content content-container edit-profile-page">
    <h1>{{ title }}</h1>

    <form method="POST" action="{{ url_for('main.edit_profile') }}" novalidate>
        {{ form.hidden_tag() }} <div class="form-group">
            {{ form.username.label(class="form-label") }}
            {{ form.username(class="form-control" + (" is-invalid" if form.username.errors else ""), size=32) }}
            {% if form.username.errors %}
                <div class="invalid-feedback">
                    {% for error in form.username.errors %}
                        <span>{{ error }}</span><br>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <div class="form-group">
            {{ form.email.label(class="form-label") }}
            {{ form.email(class="form-control" + (" is-invalid" if form.email.errors else ""), size=32) }}
            {% if form.email.errors %}
                <div class="invalid-feedback">
                    {% for error in form.email.errors %}
                        <span>{{ error }}</span><br>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <div class="form-group">
            {{ form.bio.label(class="form-label") }}
            {{ form.bio(class="form-control" + (" is-invalid" if form.bio.errors else ""), rows=4) }}
            {% if form.bio.errors %}
                <div class="invalid-feedback">
                    {% for error in form.bio.errors %}
                        <span>{{ error }}</span><br>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <div class="form-group">
            {{ form.avatar_url.label(class="form-label") }}
            {{ form.avatar_url(class="form-control" + (" is-invalid" if form.avatar_url.errors else ""), placeholder="https://example.com/image.png") }}
            {% if form.avatar_url.errors %}
                <div class="invalid-feedback">
                    {% for error in form.avatar_url.errors %}
                        <span>{{ error }}</span><br>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        
        <div class="form-group form-check">
            {{ form.profile_is_public(class="form-check-input") }}
            {{ form.profile_is_public.label(class="form-check-label") }}
            {% if form.profile_is_public.errors %}
                <div class="invalid-feedback d-block"> {% for error in form.profile_is_public.errors %}
                        <span>{{ error }}</span><br>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <div class="form-group">
            {{ form.submit(class="btn btn-primary btn-lg") }}
        </div>
    </form>
    <p style="margin-top: 20px;">
        <a href="{{ url_for('main.view_user_profile', username=current_user.username) }}" class="btn btn-link">Cancel</a>
    </p>
</section>
{% endblock %}
